<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="719px" preserveAspectRatio="none" style="width:422px;height:719px;background:#FFFFFF;" version="1.1" viewBox="0 0 422 719" width="422px" zoomAndPan="magnify"><defs><filter height="300%" id="f13e7zdkxwaxv6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="213.75" cy="20" fill="#000000" filter="url(#f13e7zdkxwaxv6)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#f13e7zdkxwaxv6)" height="200.2344" style="stroke:#000000;stroke-width:2.0;" width="340.25" x="22.25" y="40"/><path d="M90.25,40 L90.25,49.2969 L80.25,59.2969 L22.25,59.2969 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="25.25" y="53.9951">ecoboot</text><rect fill="#FFD700" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="194" x="116.75" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="130.75" y="97.4355">read: updater_flag &lt;&lt; RAM</text><polygon fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" points="160.25,130.2656,267.25,130.2656,279.25,142.2656,267.25,154.2656,160.25,154.2656,148.25,142.2656,160.25,130.2656" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="160.25" y="146.0737">updater_flag is set</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="125.25" y="139.6714">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="279.25" y="139.6714">false</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="184" x="41.5" y="164.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="51.5" y="185.4043">run updater(updater_flag)</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="97" x="245.5" y="164.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="255.5" y="185.4043">run boot.bin</text><polygon fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" points="213.75,204.2344,225.75,216.2344,213.75,228.2344,201.75,216.2344,213.75,204.2344" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="213.75" cy="271.2344" fill="#FFFFFF" filter="url(#f13e7zdkxwaxv6)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="213.75" cy="271.2344" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><ellipse cx="213.75" cy="302.2344" fill="#000000" filter="url(#f13e7zdkxwaxv6)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#f13e7zdkxwaxv6)" height="338.1406" style="stroke:#000000;stroke-width:2.0;" width="394.25" x="11" y="322.2344"/><path d="M75,322.2344 L75,331.5313 L65,341.5313 L11,341.5313 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="14" y="336.2295">updater</text><rect fill="#FFD700" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="139" x="144.25" y="358.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="158.25" y="379.6699">set updater_flag 0</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="157" x="135.25" y="412.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="145.25" y="433.6387">select by updater flag</text><line style="stroke:#A80036;stroke-width:1.5;" x1="66.75" x2="352.75" y1="466.4688" y2="466.4688"/><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="65" x="34.25" y="486.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="44.25" y="507.6074">update</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="66" x="127.25" y="486.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="137.25" y="507.6074">restore</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="63" x="221.25" y="486.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="43" x="231.25" y="507.6074">factory</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="81" x="312.25" y="486.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="322.25" y="507.6074">burn keys</text><line style="stroke:#A80036;stroke-width:1.5;" x1="66.75" x2="352.75" y1="540.4375" y2="540.4375"/><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="94" x="166.75" y="560.4375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="176.75" y="581.5762">write status</text><rect fill="#FEFECE" filter="url(#f13e7zdkxwaxv6)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="62" x="182.75" y="614.4063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="192.75" y="635.5449">reboot</text><ellipse cx="213.75" cy="691.375" fill="#FFFFFF" filter="url(#f13e7zdkxwaxv6)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="213.75" cy="691.375" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="148.25" x2="133.5" y1="142.2656" y2="142.2656"/><line style="stroke:#A80036;stroke-width:1.5;" x1="133.5" x2="133.5" y1="142.2656" y2="164.2656"/><polygon fill="#A80036" points="129.5,154.2656,133.5,164.2656,137.5,154.2656,133.5,158.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="279.25" x2="294" y1="142.2656" y2="142.2656"/><line style="stroke:#A80036;stroke-width:1.5;" x1="294" x2="294" y1="142.2656" y2="164.2656"/><polygon fill="#A80036" points="290,154.2656,294,164.2656,298,154.2656,294,158.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="133.5" x2="133.5" y1="198.2344" y2="216.2344"/><line style="stroke:#A80036;stroke-width:1.5;" x1="133.5" x2="201.75" y1="216.2344" y2="216.2344"/><polygon fill="#A80036" points="191.75,212.2344,201.75,216.2344,191.75,220.2344,195.75,216.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="294" x2="294" y1="198.2344" y2="216.2344"/><line style="stroke:#A80036;stroke-width:1.5;" x1="294" x2="225.75" y1="216.2344" y2="216.2344"/><polygon fill="#A80036" points="235.75,212.2344,225.75,216.2344,235.75,220.2344,231.75,216.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="110.2656" y2="130.2656"/><polygon fill="#A80036" points="209.75,120.2656,213.75,130.2656,217.75,120.2656,213.75,124.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="30" y2="76.2969"/><polygon fill="#A80036" points="209.75,66.2969,213.75,76.2969,217.75,66.2969,213.75,70.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="228.2344" y2="260.2344"/><polygon fill="#A80036" points="209.75,250.2344,213.75,260.2344,217.75,250.2344,213.75,254.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="392.5" y2="412.5"/><polygon fill="#A80036" points="209.75,402.5,213.75,412.5,217.75,402.5,213.75,406.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="66.75" x2="66.75" y1="467.9688" y2="486.4688"/><polygon fill="#A80036" points="62.75,476.4688,66.75,486.4688,70.75,476.4688,66.75,480.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="160.25" x2="160.25" y1="467.9688" y2="486.4688"/><polygon fill="#A80036" points="156.25,476.4688,160.25,486.4688,164.25,476.4688,160.25,480.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="252.75" x2="252.75" y1="467.9688" y2="486.4688"/><polygon fill="#A80036" points="248.75,476.4688,252.75,486.4688,256.75,476.4688,252.75,480.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="352.75" x2="352.75" y1="467.9688" y2="486.4688"/><polygon fill="#A80036" points="348.75,476.4688,352.75,486.4688,356.75,476.4688,352.75,480.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="66.75" x2="66.75" y1="520.4375" y2="540.4375"/><polygon fill="#A80036" points="62.75,530.4375,66.75,540.4375,70.75,530.4375,66.75,534.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="160.25" x2="160.25" y1="520.4375" y2="540.4375"/><polygon fill="#A80036" points="156.25,530.4375,160.25,540.4375,164.25,530.4375,160.25,534.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="252.75" x2="252.75" y1="520.4375" y2="540.4375"/><polygon fill="#A80036" points="248.75,530.4375,252.75,540.4375,256.75,530.4375,252.75,534.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="352.75" x2="352.75" y1="520.4375" y2="540.4375"/><polygon fill="#A80036" points="348.75,530.4375,352.75,540.4375,356.75,530.4375,352.75,534.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="446.4688" y2="466.4688"/><polygon fill="#A80036" points="209.75,456.4688,213.75,466.4688,217.75,456.4688,213.75,460.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="541.9375" y2="560.4375"/><polygon fill="#A80036" points="209.75,550.4375,213.75,560.4375,217.75,550.4375,213.75,554.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="594.4063" y2="614.4063"/><polygon fill="#A80036" points="209.75,604.4063,213.75,614.4063,217.75,604.4063,213.75,608.4063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="312.2344" y2="358.5313"/><polygon fill="#A80036" points="209.75,348.5313,213.75,358.5313,217.75,348.5313,213.75,352.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="213.75" x2="213.75" y1="648.375" y2="680.375"/><polygon fill="#A80036" points="209.75,670.375,213.75,680.375,217.75,670.375,213.75,674.375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f2c2c7e4ffed5b448f971aa3c79b3df4]
@startuml

start

partition ecoboot {
    #Gold: read: updater_flag << RAM;
    if (updater_flag is set) then (true)
        :run updater(updater_flag);
    else (false)
        :run boot.bin;
    endif
}
stop


start
partition updater {
    #Gold: set updater_flag 0;
    :select by updater flag;
    split
        :update;
    split again
        :restore;
    split again
        :factory;
    split again
        :burn keys;
    end split
    :write status;
    :reboot;
}
stop

@enduml

PlantUML version 1.2021.8(Sat Jun 26 10:20:59 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>